<UserControl x:Class="BadmintonClub.Views.MembersView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sys="clr-namespace:System;assembly=mscorlib">
    <UserControl.Resources>
        <!-- Button Style -->
        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#007BFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#0056b3"/>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#003d80"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#F8F9FA"/>
            <Setter Property="BorderBrush" Value="#CED4DA"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="5">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="2"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="#007BFF"/>
                                <Setter Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Style -->
        <Style x:Key="ModernDataGridStyle" TargetType="DataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#DEE2E6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="#FFFFFF"/>
            <Setter Property="AlternatingRowBackground" Value="#F8F9FA"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#E9ECEF"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="RowHeight" Value="40"/>
            <Setter Property="ColumnHeaderHeight" Value="40"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="CanUserSortColumns" Value="True"/>
        </Style>

        <!-- DataGrid Column Header Style -->
        <Style x:Key="ModernDataGridColumnHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#E9ECEF"/>
            <Setter Property="Foreground" Value="#212529"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridColumnHeader">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="#DEE2E6"
                                BorderThickness="0,0,1,1">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#DEE2E6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Cell Style -->
        <Style x:Key="ModernDataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Padding="{TemplateBinding Padding}"
                                Background="{TemplateBinding Background}"
                                BorderThickness="0">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <DockPanel Margin="16" Background="#F1F3F5">
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="0,0,0,16">
            <TextBox Width="300" 
                     Style="{StaticResource ModernTextBoxStyle}"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     ToolTip="Tìm theo tên hoặc mã"/>
            <Button Content="Thêm" 
                    Style="{StaticResource ModernButtonStyle}" 
                    Command="{Binding AddCommand}"/>
            <Button Content="Xóa" 
                    Style="{StaticResource ModernButtonStyle}" 
                    Command="{Binding DeleteCommand}"/>
            <Button Content="Lưu" 
                    Style="{StaticResource ModernButtonStyle}" 
                    Command="{Binding SaveCommand}"/>
        </StackPanel>

        <DataGrid x:Name="MembersGrid"
                  Style="{StaticResource ModernDataGridStyle}"
                  ColumnHeaderStyle="{StaticResource ModernDataGridColumnHeaderStyle}"
                  CellStyle="{StaticResource ModernDataGridCellStyle}"
                  ItemsSource="{Binding Members}"
                  SelectedItem="{Binding SelectedMember}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="True"
                  CanUserDeleteRows="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Mã" 
                                   Binding="{Binding MemberCode, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="120"/>
                <DataGridTextColumn Header="Họ tên" 
                                   Binding="{Binding HoTen, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="220"/>

                <!-- Giới tính ComboBox -->
                <DataGridComboBoxColumn Header="Giới tính"
                                       SelectedItemBinding="{Binding GioiTinh, UpdateSourceTrigger=PropertyChanged}"
                                       Width="100">
                    <DataGridComboBoxColumn.ElementStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="ItemsSource">
                                <Setter.Value>
                                    <x:Array Type="{x:Type sys:String}">
                                        <sys:String>Nam</sys:String>
                                        <sys:String>Nữ</sys:String>
                                    </x:Array>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="IsHitTestVisible" Value="False"/>
                            <Setter Property="Focusable" Value="False"/>
                        </Style>
                    </DataGridComboBoxColumn.ElementStyle>
                    <DataGridComboBoxColumn.EditingElementStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="ItemsSource">
                                <Setter.Value>
                                    <x:Array Type="{x:Type sys:String}">
                                        <sys:String>Nam</sys:String>
                                        <sys:String>Nữ</sys:String>
                                    </x:Array>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridComboBoxColumn.EditingElementStyle>
                </DataGridComboBoxColumn>

                <DataGridTextColumn Header="Ngày sinh" 
                                   Binding="{Binding NgaySinh, StringFormat=dd/MM/yyyy, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="120"/>
                <DataGridTextColumn Header="Điện thoại" 
                                   Binding="{Binding DienThoai, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="140"/>
                <DataGridTextColumn Header="Email" 
                                   Binding="{Binding Email, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="200"/>
                <DataGridTextColumn Header="Địa chỉ" 
                                   Binding="{Binding DiaChi, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="220"/>
                <DataGridTextColumn Header="Trạng thái" 
                                   Binding="{Binding TinhTrang, UpdateSourceTrigger=PropertyChanged}" 
                                   Width="120"/>
                <DataGridTextColumn Header="ELO" 
                                   Binding="{Binding Elo}" 
                                   IsReadOnly="True" 
                                   Width="80"/>

                <!-- Nhóm trình độ ComboBox -->
                <DataGridComboBoxColumn Header="Nhóm"
                                       SelectedItemBinding="{Binding NhomTrinhDo, UpdateSourceTrigger=PropertyChanged}"
                                       Width="140">
                    <DataGridComboBoxColumn.ElementStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="ItemsSource">
                                <Setter.Value>
                                    <x:Array Type="{x:Type sys:String}">
                                        <sys:String>Cao</sys:String>
                                        <sys:String>Trung bình</sys:String>
                                        <sys:String>Thấp</sys:String>
                                    </x:Array>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="IsHitTestVisible" Value="False"/>
                            <Setter Property="Focusable" Value="False"/>
                        </Style>
                    </DataGridComboBoxColumn.ElementStyle>
                    <DataGridComboBoxColumn.EditingElementStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="ItemsSource">
                                <Setter.Value>
                                    <x:Array Type="{x:Type sys:String}">
                                        <sys:String>Cao</sys:String>
                                        <sys:String>Trung bình</sys:String>
                                        <sys:String>Thấp</sys:String>
                                    </x:Array>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridComboBoxColumn.EditingElementStyle>
                </DataGridComboBoxColumn>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</UserControl>
